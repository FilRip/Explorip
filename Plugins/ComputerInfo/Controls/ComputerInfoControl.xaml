<UserControl x:Class="ComputerInfo.Controls.ComputerInfoControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ComputerInfo.Controls"
             xmlns:viewmodels="clr-namespace:ComputerInfo.ViewModels"
             xmlns:converters="clr-namespace:ComputerInfo.Converters"
             Loaded="UserControl_Loaded" Unloaded="UserControl_Unloaded"
             mc:Ignorable="d" Background="{Binding BackgroundColor, UpdateSourceTrigger=PropertyChanged}" Foreground="{Binding ForegroundColor, UpdateSourceTrigger=PropertyChanged}">

    <UserControl.DataContext>
        <viewmodels:ComputerInfoViewModel/>
    </UserControl.DataContext>
    <UserControl.Resources>
        <converters:IntToBoolConverter x:Key="intToBool"/>
    </UserControl.Resources>
    
    <StackPanel Orientation="{Binding CurrentOrientation}" Background="{Binding BackgroundColor, UpdateSourceTrigger=PropertyChanged}">
        <StackPanel.ContextMenu>
            <ContextMenu ItemsPanel="{DynamicResource MyMenuItemPanel}" Background="{Binding BackgroundColor, UpdateSourceTrigger=PropertyChanged}" Foreground="{Binding ForegroundColor, UpdateSourceTrigger=PropertyChanged}" BorderBrush="{Binding ForegroundColor}">
                <MenuItem Header="Pause" Command="{Binding PauseCommand}" IsChecked="{Binding IsPause, UpdateSourceTrigger=PropertyChanged}"/>
                <MenuItem Header="Orientation" Style="{DynamicResource MenuItemWithSubMenuStyle}">
                    <MenuItem Header="Horizontal" Command="{Binding SetOrientationCommand}" CommandParameter="H" IsChecked="{Binding HorizontalIsChecked, Mode=OneWay}"/>
                    <MenuItem Header="Vertical" Command="{Binding SetOrientationCommand}" CommandParameter="V" IsChecked="{Binding VerticalIsChecked, Mode=OneWay}"/>
                </MenuItem>
                <MenuItem Header="Precision CPU" Style="{DynamicResource MenuItemWithSubMenuStyle}">
                    <MenuItem Header="0" Command="{Binding ChangePrecisionCpuCommand}" CommandParameter="0" IsChecked="{Binding PrecisionCpu, Mode=OneWay, Converter={StaticResource intToBool}, ConverterParameter=0}"/>
                    <MenuItem Header="1" Command="{Binding ChangePrecisionCpuCommand}" CommandParameter="1" IsChecked="{Binding PrecisionCpu, Mode=OneWay, Converter={StaticResource intToBool}, ConverterParameter=1}"/>
                    <MenuItem Header="2" Command="{Binding ChangePrecisionCpuCommand}" CommandParameter="2" IsChecked="{Binding PrecisionCpu, Mode=OneWay, Converter={StaticResource intToBool}, ConverterParameter=2}"/>
                </MenuItem>
                <MenuItem Header="Refresh rate" Style="{DynamicResource MenuItemWithSubMenuStyle}">
                    <MenuItem Header="1sec" Command="{Binding ChangePeriodCommand}" CommandParameter="1000" IsChecked="{Binding Period, Mode=OneWay, Converter={StaticResource intToBool}, ConverterParameter=1000}"/>
                    <MenuItem Header="5sec" Command="{Binding ChangePeriodCommand}" CommandParameter="5000" IsChecked="{Binding Period, Mode=OneWay, Converter={StaticResource intToBool}, ConverterParameter=5000}"/>
                    <MenuItem Header="10sec" Command="{Binding ChangePeriodCommand}" CommandParameter="10000" IsChecked="{Binding Period, Mode=OneWay, Converter={StaticResource intToBool}, ConverterParameter=10000}"/>
                    <MenuItem Header="30sec" Command="{Binding ChangePeriodCommand}" CommandParameter="30000" IsChecked="{Binding Period, Mode=OneWay, Converter={StaticResource intToBool}, ConverterParameter=30000}"/>
                    <MenuItem Header="60sec" Command="{Binding ChangePeriodCommand}" CommandParameter="60000" IsChecked="{Binding Period, Mode=OneWay, Converter={StaticResource intToBool}, ConverterParameter=60000}"/>
                </MenuItem>
            </ContextMenu>
        </StackPanel.ContextMenu>
        <StackPanel Orientation="Horizontal">
            <TextBlock Grid.Column="0" Text="CPU Usage : "/>
            <TextBlock Text="{Binding CpuUsage, UpdateSourceTrigger=PropertyChanged}"/>
            <TextBlock Text=" % "/>
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="Free RAM : "/>
            <TextBlock Text="{Binding FreeRam, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:N}}"/>
            <TextBlock Text=" Mb"/>
        </StackPanel>
    </StackPanel>
        
</UserControl>
